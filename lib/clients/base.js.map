{"version":3,"file":"base.js","names":["DcaClient","params","_commitment","commitment","_connection","connection","_preflightCommitment","preflightCommitment","owner","mint","amount","dcaAccount","Keypair","generate","findVaultAddress","publicKey","vault","findAssociatedTokenAddress","ownerTokenAccount","vaultTokenAccount","NATIVE_MINT","vaultNativeMintAddress","getMintInfo","mintInfo","_amount","convertToLamports","decimals","txn","Transaction","add","DcaInstruction","depositToken","feePayer","transaction","vaultAddress","depositSol","partialSign","startTime","dcaAmount","dcaTime","_startTime","BN","toFixed","_dcaTime","_dcaAmount","minimumAmountOut","initialize","vaultTokenAddress","transferAmount","withdrawToken","ownerNativeMintAccount","withdrawSol","vaultNativeMintAccount","findPoolIdByBaseAndQuoteMint","poolKeyId","fetchPoolKeys","PublicKey","poolKeys","Liquidity","fetchInfo","poolInfo","DcaAccount","getDcaAccountInfo","dcaInfo","toString","Error","BigNumber","div","LAMPORTS_PER_SOL","amountIn","TokenAmount","Token","baseMint","baseDecimals","currencyOut","quoteMint","quoteDecimals","slippage","Percent","computeAmountOut","amountOut","minAmountOut","currentPrice","executionPrice","priceImpact","fee","swapFromSol","programId","id","authority","openOrders","targetOrders","baseVault","quoteVault","marketProgramId","marketId","marketBids","marketAsks","marketEventQueue","marketBaseVault","marketQuoteVault","marketAuthority","raw","swapToSol","fundToken","fundSol"],"sources":["../../src/clients/base.ts"],"sourcesContent":["import BigNumber from \"bignumber.js\";\nimport { BN } from \"bn.js\";\n\nimport { Liquidity, Percent, Token, TokenAmount } from \"@raydium-io/raydium-sdk\";\nimport { NATIVE_MINT } from \"@solana/spl-token\";\nimport { Commitment, Connection, Keypair, LAMPORTS_PER_SOL, PublicKey, Transaction } from \"@solana/web3.js\";\n\nimport { DcaInstruction } from \"../instruction\";\nimport { DcaAccount } from \"../models/dca-account\";\nimport {\n\tconvertToLamports,\n\tfetchPoolKeys,\n\tfindAssociatedTokenAddress,\n\tfindPoolIdByBaseAndQuoteMint,\n\tfindVaultAddress,\n\tgetMintInfo,\n} from \"../utils\";\n\nexport interface IWalletAdapter {\n\tpublicKey: PublicKey;\n\tsignTransaction(transaction: Transaction): Promise<Transaction>;\n\tsignAllTransactions(transactions: Transaction[]): Promise<Transaction[]>;\n}\n\nexport abstract class DcaClient {\n\tprotected _connection: Connection;\n\tprotected _commitment: Commitment;\n\tprotected _preflightCommitment: Commitment;\n\n\tconstructor(params: { connection: Connection; commitment: Commitment; preflightCommitment: Commitment }) {\n\t\tthis._commitment = params.commitment;\n\t\tthis._connection = params.connection;\n\t\tthis._preflightCommitment = params.preflightCommitment;\n\t}\n\n\tprotected async makeDepositTokenTransaction(owner: PublicKey, mint: PublicKey, amount: BigNumber) {\n\t\ttry {\n\t\t\tlet dcaAccount = Keypair.generate();\n\t\t\tconst vault = await findVaultAddress(owner, dcaAccount.publicKey);\n\t\t\tconst ownerTokenAccount = await findAssociatedTokenAddress(owner, mint);\n\t\t\tconst vaultTokenAccount = await findAssociatedTokenAddress(vault, mint);\n\t\t\tconst vaultNativeMintAddress = await findAssociatedTokenAddress(vault, NATIVE_MINT);\n\n\t\t\tconst mintInfo = await getMintInfo(this._connection, mint);\n\t\t\tconst _amount = convertToLamports(amount, mintInfo.decimals);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.depositToken(\n\t\t\t\t\towner,\n\t\t\t\t\tvault,\n\t\t\t\t\tmint,\n\t\t\t\t\tNATIVE_MINT,\n\t\t\t\t\townerTokenAccount,\n\t\t\t\t\tvaultTokenAccount,\n\t\t\t\t\tvaultNativeMintAddress,\n\t\t\t\t\tdcaAccount.publicKey,\n\t\t\t\t\t_amount,\n\t\t\t\t),\n\t\t\t);\n\t\t\ttxn.feePayer = owner;\n\n\t\t\treturn {\n\t\t\t\ttransaction: txn,\n\t\t\t\tdcaAccount: dcaAccount,\n\t\t\t};\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeDepositSolTransaction(owner: PublicKey, mint: PublicKey, amount: BigNumber) {\n\t\ttry {\n\t\t\tlet dcaAccount = Keypair.generate();\n\t\t\tconst vaultAddress = await findVaultAddress(owner, dcaAccount.publicKey);\n\t\t\tconst ownerTokenAccount = await findAssociatedTokenAddress(owner, mint);\n\t\t\tconst vaultTokenAccount = await findAssociatedTokenAddress(vaultAddress, mint);\n\t\t\tconst vaultNativeMintAddress = await findAssociatedTokenAddress(vaultAddress, NATIVE_MINT);\n\n\t\t\tconst _amount = convertToLamports(amount);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.depositSol(\n\t\t\t\t\towner,\n\t\t\t\t\tvaultAddress,\n\t\t\t\t\tmint,\n\t\t\t\t\tNATIVE_MINT,\n\t\t\t\t\townerTokenAccount,\n\t\t\t\t\tvaultNativeMintAddress,\n\t\t\t\t\tvaultTokenAccount,\n\t\t\t\t\tdcaAccount.publicKey,\n\t\t\t\t\t_amount,\n\t\t\t\t),\n\t\t\t);\n\t\t\ttxn.partialSign(dcaAccount);\n\t\t\ttxn.feePayer = owner;\n\n\t\t\treturn {\n\t\t\t\ttransaction: txn,\n\t\t\t\tdcaAccount: dcaAccount,\n\t\t\t};\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeInitializeTransaction(\n\t\towner: PublicKey,\n\t\tmint: PublicKey,\n\t\tdcaAccount: PublicKey,\n\t\tstartTime: BigNumber,\n\t\tdcaAmount: BigNumber,\n\t\tdcaTime: BigNumber,\n\t) {\n\t\ttry {\n\t\t\tconst vault = await findVaultAddress(owner, dcaAccount);\n\t\t\tconst _startTime = new BN(startTime.toFixed());\n\t\t\tconst _dcaTime = new BN(dcaTime.toFixed());\n\t\t\tconst mintInfo = await getMintInfo(this._connection, mint);\n\t\t\tconst _dcaAmount = convertToLamports(dcaAmount, mintInfo.decimals);\n\t\t\tconst minimumAmountOut = convertToLamports(dcaAmount, mintInfo.decimals);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.initialize(owner, vault, dcaAccount, _startTime, _dcaAmount, _dcaTime, minimumAmountOut),\n\t\t\t);\n\n\t\t\treturn txn;\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeWithdrawTokenTransaction(\n\t\towner: PublicKey,\n\t\tmint: PublicKey,\n\t\tdcaAccount: PublicKey,\n\t\tamount: BigNumber,\n\t) {\n\t\ttry {\n\t\t\tconst vaultAddress = await findVaultAddress(owner, dcaAccount);\n\t\t\tconst ownerTokenAccount = await findAssociatedTokenAddress(owner, mint);\n\t\t\tconst vaultTokenAddress = await findAssociatedTokenAddress(vaultAddress, mint);\n\t\t\tconst mintInfo = await getMintInfo(this._connection, mint);\n\t\t\tconst transferAmount = convertToLamports(amount, mintInfo.decimals);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.withdrawToken(\n\t\t\t\t\towner,\n\t\t\t\t\tvaultAddress,\n\t\t\t\t\tmint,\n\t\t\t\t\townerTokenAccount,\n\t\t\t\t\tvaultTokenAddress,\n\t\t\t\t\tdcaAccount,\n\t\t\t\t\ttransferAmount,\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn txn;\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeWithdrawSolTransaction(\n\t\towner: PublicKey,\n\t\tmint: PublicKey,\n\t\tdcaAccount: PublicKey,\n\t\tamount: BigNumber,\n\t) {\n\t\ttry {\n\t\t\tconst vaultAddress = await findVaultAddress(owner, dcaAccount);\n\t\t\tconst ownerTokenAccount = await findAssociatedTokenAddress(owner, mint);\n\t\t\tconst ownerNativeMintAccount = await findAssociatedTokenAddress(owner, NATIVE_MINT);\n\t\t\tconst vaultTokenAddress = await findAssociatedTokenAddress(vaultAddress, mint);\n\t\t\tconst vaultNativeMintAddress = await findAssociatedTokenAddress(vaultAddress, NATIVE_MINT);\n\t\t\tconst transferAmount = convertToLamports(amount);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.withdrawSol(\n\t\t\t\t\towner,\n\t\t\t\t\tvaultAddress,\n\t\t\t\t\tmint,\n\t\t\t\t\townerTokenAccount,\n\t\t\t\t\tvaultTokenAddress,\n\t\t\t\t\tdcaAccount,\n\t\t\t\t\tNATIVE_MINT,\n\t\t\t\t\tvaultNativeMintAddress,\n\t\t\t\t\townerNativeMintAccount,\n\t\t\t\t\ttransferAmount,\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn txn;\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeSwapFromSolTransaction(owner: PublicKey, mint: PublicKey, dcaAccount: PublicKey) {\n\t\ttry {\n\t\t\tconst vault = await findVaultAddress(owner, dcaAccount);\n\t\t\tconst vaultNativeMintAccount = await findAssociatedTokenAddress(vault, NATIVE_MINT);\n\t\t\tconst vaultTokenAccount = await findAssociatedTokenAddress(vault, mint);\n\t\t\tconst poolKeyId = await findPoolIdByBaseAndQuoteMint(NATIVE_MINT, mint);\n\t\t\tconst poolKeys = await fetchPoolKeys(this._connection, new PublicKey(poolKeyId));\n\t\t\tconst poolInfo = await Liquidity.fetchInfo({\n\t\t\t\tconnection: this._connection,\n\t\t\t\tpoolKeys,\n\t\t\t});\n\t\t\tconst dcaInfo = await DcaAccount.getDcaAccountInfo(this._connection, dcaAccount);\n\t\t\tif (dcaInfo.dcaAmount.toString() === \"0\") {\n\t\t\t\tthrow new Error(\"Dca amout is zero\");\n\t\t\t}\n\t\t\tconst amount = new BigNumber(dcaInfo.dcaAmount.toString()).div(new BigNumber(LAMPORTS_PER_SOL));\n\t\t\tconst amountIn = new TokenAmount(new Token(poolKeys.baseMint, poolInfo.baseDecimals), amount.toFixed(), false);\n\t\t\tconst currencyOut = new Token(poolKeys.quoteMint, poolInfo.quoteDecimals);\n\t\t\tconst slippage = new Percent(5, 100);\n\t\t\tconst { amountOut, minAmountOut, currentPrice, executionPrice, priceImpact, fee } = Liquidity.computeAmountOut({\n\t\t\t\tpoolKeys,\n\t\t\t\tpoolInfo,\n\t\t\t\tamountIn,\n\t\t\t\tcurrencyOut,\n\t\t\t\tslippage,\n\t\t\t});\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.swapFromSol(\n\t\t\t\t\tpoolKeys.programId, // liquidityProgramId\n\t\t\t\t\tpoolKeys.id, // ammAddress\n\t\t\t\t\tpoolKeys.authority, // ammAuthorityAddress\n\t\t\t\t\tpoolKeys.openOrders, // ammOpenOrderAddress\n\t\t\t\t\tpoolKeys.targetOrders, // ammTargetOrderAddress\n\t\t\t\t\tpoolKeys.baseVault, // poolCoinTokenAddress\n\t\t\t\t\tpoolKeys.quoteVault, // poolPcTokenAddress\n\t\t\t\t\tpoolKeys.marketProgramId, // serumMarketProgramId\n\t\t\t\t\tpoolKeys.marketId, // serumMarketAddress\n\t\t\t\t\tpoolKeys.marketBids, // serumBidsAddress\n\t\t\t\t\tpoolKeys.marketAsks, // serumAskAddress\n\t\t\t\t\tpoolKeys.marketEventQueue, // serumEventQueueAddress\n\t\t\t\t\tpoolKeys.marketBaseVault, // serumCoinVaultAddress\n\t\t\t\t\tpoolKeys.marketQuoteVault, // serumVaultAddress\n\t\t\t\t\tpoolKeys.marketAuthority, // serumVaultSigner\n\t\t\t\t\tvault,\n\t\t\t\t\tvaultNativeMintAccount,\n\t\t\t\t\tvaultTokenAccount,\n\t\t\t\t\tmint,\n\t\t\t\t\towner,\n\t\t\t\t\tdcaAccount,\n\t\t\t\t\tNATIVE_MINT,\n\t\t\t\t\tminAmountOut.raw,\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn txn;\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeSwapToSolTransaction(owner: PublicKey, mint: PublicKey, dcaAccount: PublicKey) {\n\t\tconst vault = await findVaultAddress(owner, dcaAccount);\n\t\tconst vaultTokenAccount = await findAssociatedTokenAddress(vault, mint);\n\t\tconst vaultNativeMintAccount = await findAssociatedTokenAddress(vault, NATIVE_MINT);\n\t\tconst poolKeyId = await findPoolIdByBaseAndQuoteMint(mint, NATIVE_MINT);\n\t\tconst poolKeys = await fetchPoolKeys(this._connection, new PublicKey(poolKeyId));\n\t\tconst poolInfo = await Liquidity.fetchInfo({\n\t\t\tconnection: this._connection,\n\t\t\tpoolKeys,\n\t\t});\n\t\tconst dcaInfo = await DcaAccount.getDcaAccountInfo(this._connection, dcaAccount);\n\t\tif (dcaInfo.dcaAmount.toString() === \"0\") {\n\t\t\tthrow new Error(\"Dca amount is zero\");\n\t\t}\n\t\tconst mintInfo = await getMintInfo(this._connection, mint);\n\t\tconst amount = new BigNumber(dcaInfo.dcaAmount.toString()).div(new BigNumber(10 ** mintInfo.decimals));\n\t\tconst amountIn = new TokenAmount(new Token(poolKeys.baseMint, poolInfo.baseDecimals), amount.toString(), false);\n\t\tconst currencyOut = new Token(poolKeys.quoteMint, poolInfo.quoteDecimals);\n\t\tconst slippage = new Percent(5, 100);\n\t\tconst { amountOut, minAmountOut, currentPrice, executionPrice, priceImpact, fee } = Liquidity.computeAmountOut({\n\t\t\tpoolKeys,\n\t\t\tpoolInfo,\n\t\t\tamountIn,\n\t\t\tcurrencyOut,\n\t\t\tslippage,\n\t\t});\n\n\t\tlet txn = new Transaction().add(\n\t\t\tDcaInstruction.swapToSol(\n\t\t\t\tpoolKeys.programId,\n\t\t\t\tpoolKeys.id, // ammAddress\n\t\t\t\tpoolKeys.authority, // ammAuthorityAddress\n\t\t\t\tpoolKeys.openOrders, // ammOpenOrderAddress\n\t\t\t\tpoolKeys.targetOrders, // ammTargetOrderAddress\n\t\t\t\tpoolKeys.baseVault, // poolCoinTokenAddress\n\t\t\t\tpoolKeys.quoteVault, // poolPcTokenAddress\n\t\t\t\tpoolKeys.marketProgramId, // serumMarketProgramId\n\t\t\t\tpoolKeys.marketId, // serumMarketAddress\n\t\t\t\tpoolKeys.marketBids, // serumBidsAddress\n\t\t\t\tpoolKeys.marketAsks, // serumAskAddress\n\t\t\t\tpoolKeys.marketEventQueue, // serumEventQueueAddress\n\t\t\t\tpoolKeys.marketBaseVault, // serumCoinVaultAddress\n\t\t\t\tpoolKeys.marketQuoteVault, // serumVaultAddress\n\t\t\t\tpoolKeys.marketAuthority, // serumVaultSigner\n\t\t\t\tvault,\n\t\t\t\tvaultNativeMintAccount,\n\t\t\t\tvaultTokenAccount,\n\t\t\t\tmint,\n\t\t\t\towner,\n\t\t\t\tdcaAccount,\n\t\t\t\tNATIVE_MINT,\n\t\t\t\tminAmountOut.raw,\n\t\t\t),\n\t\t);\n\n\t\treturn txn;\n\t}\n\n\tprotected async makeFundTokenTransaction(\n\t\towner: PublicKey,\n\t\tmint: PublicKey,\n\t\tdcaAccount: PublicKey,\n\t\tamount: BigNumber,\n\t) {\n\t\ttry {\n\t\t\tconst vault = await findVaultAddress(owner, dcaAccount);\n\t\t\tconst ownerTokenAccount = await findAssociatedTokenAddress(owner, mint);\n\t\t\tconst vaultTokenAccount = await findAssociatedTokenAddress(vault, mint);\n\t\t\tconst mintInfo = await getMintInfo(this._connection, mint);\n\t\t\tconst transferAmount = convertToLamports(amount, mintInfo.decimals);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.fundToken(owner, vault, mint, ownerTokenAccount, vaultTokenAccount, dcaAccount, transferAmount),\n\t\t\t);\n\n\t\t\treturn txn;\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprotected async makeFundSolTransaction(owner: PublicKey, mint: PublicKey, dcaAccount: PublicKey, amount: BigNumber) {\n\t\ttry {\n\t\t\tconst vault = await findVaultAddress(owner, dcaAccount);\n\t\t\tconst ownerTokenAccount = await findAssociatedTokenAddress(owner, mint);\n\t\t\tconst vaultTokenAccount = await findAssociatedTokenAddress(vault, mint);\n\t\t\tconst vaultNativeMintAccount = await findAssociatedTokenAddress(vault, NATIVE_MINT);\n\t\t\tconst transferAmount = convertToLamports(amount);\n\n\t\t\tlet txn = new Transaction().add(\n\t\t\t\tDcaInstruction.fundSol(\n\t\t\t\t\towner,\n\t\t\t\t\tvault,\n\t\t\t\t\tmint,\n\t\t\t\t\tNATIVE_MINT,\n\t\t\t\t\townerTokenAccount,\n\t\t\t\t\tvaultNativeMintAccount,\n\t\t\t\t\tvaultTokenAccount,\n\t\t\t\t\tdcaAccount,\n\t\t\t\t\ttransferAmount,\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn txn;\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n}\n"],"mappings":"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"}